= Terraform Options
:idprefix:
:idseparator: -
:sectlinks:
:sectnums:
:uri-repo: https://github.com/oracle/terraform-oci-base

:uri-rel-file-base: link:{uri-repo}/blob/master
:uri-rel-tree-base: link:{uri-repo}/tree/master
:uri-docs: {uri-rel-file-base}/docs
:uri-oci-images: https://docs.cloud.oracle.com/iaas/images/
:uri-oci-region: https://docs.cloud.oracle.com/iaas/Content/General/Concepts/regions.htm
:uri-terraform-cidrsubnet: https://www.terraform.io/docs/configuration/functions/cidrsubnet.html
:uri-topology: {uri-docs}/topology.adoc

Configuration Terraform Options:

. link:#identity-and-access[Identity and Access]
. link:#ssh-keys[SSH Keys]
. link:#general-oci[General OCI]
. link:#oci-networking[OCI Networking]
. link:#bastion-host[Bastion Host]

=== Identity and access

[stripes=odd,cols="1d,4d,3a,3a", options=header,width="100%"] 
|===
|Parameter
|Description
|Values
|Default

|api_fingerprint
|ssl fingerprint of api public key. *Required*
|
|None

|api_private_key_path
|path to api private key. *Required*
|
|None

|compartment_name
|Compartment name where the VCN and other resources will be provisioned. Value must match with the name of the compartment_ocid provided below *Required*
|
|None

|compartment_ocid
|Compartment name where the VCN and other resources will be provisioned. Value must match with the OCID of the compartment_name provided above. *Required*
|
|None

|tenancy_ocid
|Tenancy ocid of the user. *Required*
|
|None

|user_ocid
|User's ocid. *Required*
|
|None

|===

=== SSH Keys

[stripes=odd,cols="1d,4d,3a,3a", options=header,width="100%"] 
|===
|Parameter
|Description
|Values
|Default

|ssh_private_key_path
|path to ssh private key. This ssh key is used to authenticate and log into the bastion host. Must be the private key of the public key provided below. *Required* if bastion is enabled.

|
|None

|ssh_public_key_path
|path to ssh public key. The ssh key is used when provisioning the bastion host. Must be the public key of the private key provided above. *Required* if bastion is enabled.
|
|None

|===

=== General OCI

[stripes=odd,cols="1d,4d,3a,3a", options=header,width="100%"] 
|===
|Parameter
|Description
|Values
|Default

|label_prefix
|a string to be prepended to the name of resources.
|
|base

|region
|Region where to provision the resources. {uri-oci-region}[List of regions]. *Required*
|
|us-phoenix-1

|===

=== OCI Networking

[stripes=odd,cols="1d,4d,3a,3a", options=header,width="100%"] 
|===
|Parameter
|Description
|Values
|Default


|vcn_name
|The name of the VCN that will be appended to the label_prefix.
|
|vcn

|vcn_cidr
|The VCN's CIDR block.
|
|10.0.0.0/16

|vcn_dns_label
|The internal DNS domain for resources created and prepended to "oraclevcn.com" which is the VCN-internal domain name.
|
|base

|create_nat_gateway
|Whether to create a NAT gateway. *Required* for private subnets.
|true/false
|true

|nat_gateway_name
|The NAT gateway name. Appended to the label_prefix.
| 
|nat

|create_service_gateway
|Whether to create a Service Gateway to use Oracle Services.
|true/false
|true

|service_gateway_name
|The Service gateway name. Appended to the label_prefix
| 
|sg

|newbits
|The difference between the VCN's netmask and the desired subnets' masks specified in the form of a map. The values of the map are used as the newbits parameter in the {uri-terraform-cidrsubnet}[cidrsubnet] Terraform function to calculate each subnet's mask.
|[source]
----
13
----
|
[source]
----
13
----

|subnets
|0-based index of the subnets when the VCN's CIDR is masked with the corresponding newbit value and specified in the form of a map. Used to define the boundaries of the subnets. The values of the map are used as the netnum parameter in the {uri-terraform-cidrsubnet}[cidrsubnet] Terraform function.
|[source]
----
32
----
|
[source]
----
32
----


|===

=== Bastion Host

[stripes=odd,cols="1d,4d,3a,3a", options=header,width="100%"] 
|===
|Parameter
|Description
|Values
|Default

|create_bastion
|Whether to create the bastion host.
|true/false
|true

|bastion_shape
|The shape of bastion instance.
|
|VM.Standard.E2.1

|bastion_access
|CIDR block in the form of a string to which ssh access to the bastion must be restricted to. *_ANYWHERE_* is equivalent to 0.0.0.0/0 and allows ssh access from anywhere.
|XXX.XXX.XXX.XXX/YY
|ANYWHERE

|enable_instance_principal
|
|
|

|image_operating_system
|The Operating System image to be used to provision the bastion.
|Oracle Linux, CentOS, Canonical Ubuntu
|Oracle Linux

|image_operating_system_version
|The version of the selected Operating System to be used to provision the bastion host. Matching versions of available operating systems can be found {uri-oci-images}[here].
|
|7.7

|availability_domains
|The Availability Domain where to provision non-OKE resources e.g. bastion host. This is specified in the form of a map.
|[source]
----
1
----
|
[source]
----
1
----

|bastion_package_update
|Whether to update the apt database on first boot. Only applicable if the bastion host uses Ubuntu as Linux distribution.
|true/false
|true

|bastion_package_upgrade
|Whether to upgrade the instance on first boot. If you choose Ubuntu for the bastion and you set this to true, also set the bastion_package_update to true as well. Useful to turn off *during development* as it makes the bastion become available faster.
|true/false
|true

|===